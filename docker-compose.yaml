version: '3.8'

services:
  minmax_octopus_bot:
    container_name: MinMaxOctopusBot
    image: eelmafia/octopus-minmax-bot
    restart: unless-stopped
    ports:
      - "5050:5050"
    volumes:
      - ./logs:/app/logs
      - ./config:/config
    environment:
      - TZ=Europe/London
      # These environment variables can be removed after first run - they will be copied to the 
      # config file on first run. If they are kept, they will override the config file settings
      # until removed.
      - OCTOBOT_CONFIG_PATH=/config/config.json # Optional: config file path
      - API_KEY=${API_KEY:-} # Required: Octopus Energy API key (sk_live_...)
      - ACC_NUMBER=${ACC_NUMBER:-} # Required: account number (starts with A-)
      - BASE_URL=https://api.octopus.energy/v1 # Required: Octopus API base URL
      - NOTIFICATION_URLS=${NOTIFICATION_URLS:-} # Optional: comma-separated Apprise URLs
      - BATCH_NOTIFICATIONS=false # Optional: send notifications in batches
      - ONLY_RESULTS_NOTIFICATIONS=false # Optional: only send final results as notification
      - EXECUTION_TIME=23:00 # Required: daily run time (HH:MM)
      - SWITCH_THRESHOLD=2 # Optional: switch threshold in pence
      - TARIFFS=go,agile,flexible # Required: tariff IDs list
      - ONE_OFF=false # Optional: run once and exit
      - DRY_RUN=true # Optional: notify only, don't switch
      - WEB_USERNAME=${WEB_USERNAME:-admin} # Optional: web UI username
      - WEB_PASSWORD=${WEB_PASSWORD:-admin} # Optional: web UI password
      - WEB_PORT=5050 # Optional: web UI port
      - NO_WEB_SERVER=false # Optional: disable web server
